<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${event.title} + ' - EventHub'">Event Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-4">

    <a th:href="@{/home}" class="btn btn-link mb-3">&larr; Back to events</a>

    <h1 th:text="${event.title}">Event Title</h1>

    <p class="text-muted">
        <strong th:text="${#temporals.format(event.eventDate, 'EEEE d MMMM yyyy')}">Date</strong>
        at <strong th:text="${#temporals.format(event.eventTime, 'h:mm a')}">Time</strong>
        <span th:if="${event.location != null}"> • <span th:text="${event.location}">Location</span></span>
    </p>

    <div class="mb-3" th:if="${event.category != null}">
        <span class="badge"
              th:style="'background-color:' + ${event.category.colourCode} + '; color:white;'"
              th:text="${event.category.name}">Category</span>
    </div>

    <div class="mb-4">
        <p th:text="${event.description}">Full description of the event…</p>
    </div>

    <div class="d-flex align-items-center gap-3 mb-4">
        <div><strong>Capacity:</strong>
            <span th:text="${event.capacity != null ? event.capacity : 'Unlimited'}"></span>
        </div>
        <div><strong>Created by:</strong>
            <span th:text="${event.createdBy != null ? event.createdBy.username : 'N/A'}"></span>
        </div>
        <div><strong>Created at:</strong>
            <span th:text="${#temporals.format(event.createdAt, 'd MMM yyyy HH:mm')}"></span>
        </div>
    </div>

    <!-- RSVP placeholder -->
    <div>
        <form th:action="@{'/events/' + ${event.id} + '/rsvp'}" method="post" sec:authorize="isAuthenticated()">
            <button type="button" class="btn btn-primary" disabled>RSVP (coming soon)</button>
        </form>
        <p class="text-muted mt-2">RSVP functionality will be added in a later user story.</p>
    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
